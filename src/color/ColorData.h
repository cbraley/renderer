#ifndef COLOR_DATA_H
#define COLOR_DATA_H

#include <cstring>
//--
#include "Assert.h"

/**
 *  File stores the raw data for the XYZ spectral matching curves (CIE CMFs)
 *  in both 2-degree and 10 degree FOV.  Data taken from:
 *      http://www.cis.rit.edu/research/mcsl2/online/CIE/all_1nm_data.xls
 *
 *  Sampled at 1nm intervals.
 *
 *  Comes with a super simple 1-function API for accessing the data.
 *
 *  @date Oct 3, 2011
 */

enum CMF_ID{
    X_CMF_2DEG,
    Y_CMF_2DEG,
    Z_CMF_2DEG,
    X_CMF_10DEG,
    Y_CMF_10DEG,
    Z_CMF_10DEG,
    PHOTOPIC,
    SCOPTIC
};

typedef struct CMF{
    float* data;
    float nmMin;
    float nmMax;
    float nmStep;
    int N;
}CMF;

/**
 *  Get a copy of the data for a spcified curve.  Which curve is specified through the
 *  first param, an enum.
 *
 *  Note that the data array in the return CMF is dynamically allocated and the callee is responsible for
 *  deallocating it using delete[].
 */
CMF getCMF(CMF_ID curveType);


//CIE X 2 degree spectral matching curve
//from  http://www.cis.rit.edu/research/mcsl2/online/CIE/all_1nm_data.xls
static const float X_BAR_2_DEG_MIN  = 360.0f;
static const float X_BAR_2_DEG_MAX  = 830.0f;
static const float X_BAR_2_DEG_STEP = 1.0f;
static const int X_BAR_2_N = 471;
static const float X_BAR_2_DEG[471] = {
    0.0001299,
    0.000145847,
    0.0001638021,
    0.0001840037,
    0.0002066902,
    0.0002321,
    0.000260728,
    0.000293075,
    0.000329388,
    0.000369914,
    0.0004149,
    0.0004641587,
    0.000518986,
    0.000581854,
    0.0006552347,
    0.0007416,
    0.0008450296,
    0.0009645268,
    0.001094949,
    0.001231154,
    0.001368,
    0.00150205,
    0.001642328,
    0.001802382,
    0.001995757,
    0.002236,
    0.002535385,
    0.002892603,
    0.003300829,
    0.003753236,
    0.004243,
    0.004762389,
    0.005330048,
    0.005978712,
    0.006741117,
    0.00765,
    0.008751373,
    0.01002888,
    0.0114217,
    0.01286901,
    0.01431,
    0.01570443,
    0.01714744,
    0.01878122,
    0.02074801,
    0.02319,
    0.02620736,
    0.02978248,
    0.03388092,
    0.03846824,
    0.04351,
    0.0489956,
    0.0550226,
    0.0617188,
    0.069212,
    0.07763,
    0.08695811,
    0.09717672,
    0.1084063,
    0.1207672,
    0.13438,
    0.1493582,
    0.1653957,
    0.1819831,
    0.198611,
    0.21477,
    0.2301868,
    0.2448797,
    0.2587773,
    0.2718079,
    0.2839,
    0.2949438,
    0.3048965,
    0.3137873,
    0.3216454,
    0.3285,
    0.3343513,
    0.3392101,
    0.3431213,
    0.3461296,
    0.34828,
    0.3495999,
    0.3501474,
    0.350013,
    0.349287,
    0.34806,
    0.3463733,
    0.3442624,
    0.3418088,
    0.3390941,
    0.3362,
    0.3331977,
    0.3300411,
    0.3266357,
    0.3228868,
    0.3187,
    0.3140251,
    0.308884,
    0.3032904,
    0.2972579,
    0.2908,
    0.2839701,
    0.2767214,
    0.2689178,
    0.2604227,
    0.2511,
    0.2408475,
    0.2298512,
    0.2184072,
    0.2068115,
    0.19536,
    0.1842136,
    0.1733273,
    0.1626881,
    0.1522833,
    0.1421,
    0.1321786,
    0.1225696,
    0.1132752,
    0.1042979,
    0.09564,
    0.08729955,
    0.07930804,
    0.07171776,
    0.06458099,
    0.05795001,
    0.05186211,
    0.04628152,
    0.04115088,
    0.03641283,
    0.03201,
    0.0279172,
    0.0241444,
    0.020687,
    0.0175404,
    0.0147,
    0.01216179,
    0.00991996,
    0.00796724,
    0.006296346,
    0.0049,
    0.003777173,
    0.00294532,
    0.00242488,
    0.002236293,
    0.0024,
    0.00292552,
    0.00383656,
    0.00517484,
    0.00698208,
    0.0093,
    0.01214949,
    0.01553588,
    0.01947752,
    0.02399277,
    0.0291,
    0.03481485,
    0.04112016,
    0.04798504,
    0.05537861,
    0.06327,
    0.07163501,
    0.08046224,
    0.08973996,
    0.09945645,
    0.1096,
    0.1201674,
    0.1311145,
    0.1423679,
    0.1538542,
    0.1655,
    0.1772571,
    0.18914,
    0.2011694,
    0.2133658,
    0.2257499,
    0.2383209,
    0.2510668,
    0.2639922,
    0.2771017,
    0.2904,
    0.3038912,
    0.3175726,
    0.3314384,
    0.3454828,
    0.3597,
    0.3740839,
    0.3886396,
    0.4033784,
    0.4183115,
    0.4334499,
    0.4487953,
    0.464336,
    0.480064,
    0.4959713,
    0.5120501,
    0.5282959,
    0.5446916,
    0.5612094,
    0.5778215,
    0.5945,
    0.6112209,
    0.6279758,
    0.6447602,
    0.6615697,
    0.6784,
    0.6952392,
    0.7120586,
    0.7288284,
    0.7455188,
    0.7621,
    0.7785432,
    0.7948256,
    0.8109264,
    0.8268248,
    0.8425,
    0.8579325,
    0.8730816,
    0.8878944,
    0.9023181,
    0.9163,
    0.9297995,
    0.9427984,
    0.9552776,
    0.9672179,
    0.9786,
    0.9893856,
    0.9995488,
    1.0090892,
    1.0180064,
    1.0263,
    1.0339827,
    1.040986,
    1.047188,
    1.0524667,
    1.0567,
    1.0597944,
    1.0617992,
    1.0628068,
    1.0629096,
    1.0622,
    1.0607352,
    1.0584436,
    1.0552244,
    1.0509768,
    1.0456,
    1.0390369,
    1.0313608,
    1.0226662,
    1.0130477,
    1.0026,
    0.9913675,
    0.9793314,
    0.9664916,
    0.9528479,
    0.9384,
    0.923194,
    0.907244,
    0.890502,
    0.87292,
    0.8544499,
    0.835084,
    0.814946,
    0.794186,
    0.772954,
    0.7514,
    0.7295836,
    0.7075888,
    0.6856022,
    0.6638104,
    0.6424,
    0.6215149,
    0.6011138,
    0.5811052,
    0.5613977,
    0.5419,
    0.5225995,
    0.5035464,
    0.4847436,
    0.4661939,
    0.4479,
    0.4298613,
    0.412098,
    0.394644,
    0.3775333,
    0.3608,
    0.3444563,
    0.3285168,
    0.3130192,
    0.2980011,
    0.2835,
    0.2695448,
    0.2561184,
    0.2431896,
    0.2307272,
    0.2187,
    0.2070971,
    0.1959232,
    0.1851708,
    0.1748323,
    0.1649,
    0.1553667,
    0.14623,
    0.13749,
    0.1291467,
    0.1212,
    0.1136397,
    0.106465,
    0.09969044,
    0.09333061,
    0.0874,
    0.08190096,
    0.07680428,
    0.07207712,
    0.06768664,
    0.0636,
    0.05980685,
    0.05628216,
    0.05297104,
    0.04981861,
    0.04677,
    0.04378405,
    0.04087536,
    0.03807264,
    0.03540461,
    0.0329,
    0.03056419,
    0.02838056,
    0.02634484,
    0.02445275,
    0.0227,
    0.02108429,
    0.01959988,
    0.01823732,
    0.01698717,
    0.01584,
    0.01479064,
    0.01383132,
    0.01294868,
    0.0121292,
    0.01135916,
    0.01062935,
    0.009938846,
    0.009288422,
    0.008678854,
    0.008110916,
    0.007582388,
    0.007088746,
    0.006627313,
    0.006195408,
    0.005790346,
    0.005409826,
    0.005052583,
    0.004717512,
    0.004403507,
    0.004109457,
    0.003833913,
    0.003575748,
    0.003334342,
    0.003109075,
    0.002899327,
    0.002704348,
    0.00252302,
    0.002354168,
    0.002196616,
    0.00204919,
    0.00191096,
    0.001781438,
    0.00166011,
    0.001546459,
    0.001439971,
    0.001340042,
    0.001246275,
    0.001158471,
    0.00107643,
    0.0009999493,
    0.0009287358,
    0.0008624332,
    0.0008007503,
    0.000743396,
    0.0006900786,
    0.0006405156,
    0.0005945021,
    0.0005518646,
    0.000512429,
    0.0004760213,
    0.0004424536,
    0.0004115117,
    0.0003829814,
    0.0003566491,
    0.0003323011,
    0.0003097586,
    0.0002888871,
    0.0002695394,
    0.0002515682,
    0.0002348261,
    0.000219171,
    0.0002045258,
    0.0001908405,
    0.0001780654,
    0.0001661505,
    0.0001550236,
    0.0001446219,
    0.0001349098,
    0.000125852,
    0.000117413,
    0.0001095515,
    0.0001022245,
    9.539445E-005,
    8.90239E-005,
    8.307527E-005,
    7.751269E-005,
    0.000072313,
    6.745778E-005,
    6.292844E-005,
    5.870652E-005,
    5.477028E-005,
    5.109918E-005,
    4.767654E-005,
    4.448567E-005,
    4.150994E-005,
    3.873324E-005,
    0.000036142,
    3.372352E-005,
    3.146487E-005,
    2.935326E-005,
    2.737573E-005,
    2.552433E-005,
    2.379376E-005,
    2.21787E-005,
    2.067383E-005,
    1.927226E-005,
    1.79664E-005,
    1.674991E-005,
    1.561648E-005,
    1.455977E-005,
    1.357387E-005,
    1.265436E-005,
    1.179723E-005,
    1.099844E-005,
    0.000010254,
    9.559646E-006,
    0.000008912,
    8.308358E-006,
    7.745769E-006,
    7.221456E-006,
    6.732475E-006,
    6.276423E-006,
    5.851304E-006,
    5.455118E-006,
    5.085868E-006,
    4.741466E-006,
    4.420236E-006,
    4.120783E-006,
    3.841716E-006,
    3.581652E-006,
    3.339127E-006,
    3.112949E-006,
    2.902121E-006,
    2.705645E-006,
    2.522525E-006,
    2.351726E-006,
    2.192415E-006,
    2.043902E-006,
    1.905497E-006,
    1.776509E-006,
    1.656215E-006,
    0.000001544,
    1.43944E-006,
    0.000001342,
    1.251141E-006
};







//CIE 2 degree Y spectral matching curve
//from  http://www.cis.rit.edu/research/mcsl2/online/CIE/all_1nm_data.xls
static const float Y_BAR_2_DEG_MIN  = 360.0f;
static const float Y_BAR_2_DEG_MAX  = 830.0f;
static const float Y_BAR_2_DEG_STEP = 1.0f;
static const int Y_BAR_2_N = 471;
static const float Y_BAR_2_DEG[471] = {
    0.000003917,
    4.393581E-006,
    4.929604E-006,
    5.532136E-006,
    6.208245E-006,
    0.000006965,
    7.813219E-006,
    8.767336E-006,
    9.839844E-006,
    1.104323E-005,
    0.00001239,
    1.388641E-005,
    1.555728E-005,
    0.000017443,
    1.958375E-005,
    0.00002202,
    2.483965E-005,
    2.804126E-005,
    0.000031531,
    3.521521E-005,
    0.000039,
    4.28264E-005,
    4.69146E-005,
    5.15896E-005,
    5.71764E-005,
    0.000064,
    7.234421E-005,
    8.221224E-005,
    9.350816E-005,
    0.0001061361,
    0.00012,
    0.000134984,
    0.000151492,
    0.000170208,
    0.000191816,
    0.000217,
    0.0002469067,
    0.00028124,
    0.00031852,
    0.0003572667,
    0.000396,
    0.0004337147,
    0.000473024,
    0.000517876,
    0.0005722187,
    0.00064,
    0.00072456,
    0.0008255,
    0.00094116,
    0.00106988,
    0.00121,
    0.001362091,
    0.001530752,
    0.001720368,
    0.001935323,
    0.00218,
    0.0024548,
    0.002764,
    0.0031178,
    0.0035264,
    0.004,
    0.00454624,
    0.00515932,
    0.00582928,
    0.00654616,
    0.0073,
    0.008086507,
    0.00890872,
    0.00976768,
    0.01066443,
    0.0116,
    0.01257317,
    0.01358272,
    0.01462968,
    0.01571509,
    0.01684,
    0.01800736,
    0.01921448,
    0.02045392,
    0.02171824,
    0.023,
    0.02429461,
    0.02561024,
    0.02695857,
    0.02835125,
    0.0298,
    0.03131083,
    0.03288368,
    0.03452112,
    0.03622571,
    0.038,
    0.03984667,
    0.041768,
    0.043766,
    0.04584267,
    0.048,
    0.05024368,
    0.05257304,
    0.05498056,
    0.05745872,
    0.06,
    0.06260197,
    0.06527752,
    0.06804208,
    0.07091109,
    0.0739,
    0.077016,
    0.0802664,
    0.0836668,
    0.0872328,
    0.09098,
    0.09491755,
    0.09904584,
    0.1033674,
    0.1078846,
    0.1126,
    0.117532,
    0.1226744,
    0.1279928,
    0.1334528,
    0.13902,
    0.1446764,
    0.1504693,
    0.1564619,
    0.1627177,
    0.1693,
    0.1762431,
    0.1835581,
    0.1912735,
    0.199418,
    0.20802,
    0.2171199,
    0.2267345,
    0.2368571,
    0.2474812,
    0.2586,
    0.2701849,
    0.2822939,
    0.2950505,
    0.308578,
    0.323,
    0.3384021,
    0.3546858,
    0.3716986,
    0.3892875,
    0.4073,
    0.4256299,
    0.4443096,
    0.4633944,
    0.4829395,
    0.503,
    0.5235693,
    0.544512,
    0.56569,
    0.5869653,
    0.6082,
    0.6293456,
    0.6503068,
    0.6708752,
    0.6908424,
    0.71,
    0.7281852,
    0.7454636,
    0.7619694,
    0.7778368,
    0.7932,
    0.8081104,
    0.8224962,
    0.8363068,
    0.8494916,
    0.862,
    0.8738108,
    0.8849624,
    0.8954936,
    0.9054432,
    0.9148501,
    0.9237348,
    0.9320924,
    0.9399226,
    0.9472252,
    0.954,
    0.9602561,
    0.9660074,
    0.9712606,
    0.9760225,
    0.9803,
    0.9840924,
    0.9874182,
    0.9903128,
    0.9928116,
    0.9949501,
    0.9967108,
    0.9980983,
    0.999112,
    0.9997482,
    1,
    0.9998567,
    0.9993046,
    0.9983255,
    0.9968987,
    0.995,
    0.9926005,
    0.9897426,
    0.9864444,
    0.9827241,
    0.9786,
    0.9740837,
    0.9691712,
    0.9638568,
    0.9581349,
    0.952,
    0.9454504,
    0.9384992,
    0.9311628,
    0.9234576,
    0.9154,
    0.9070064,
    0.8982772,
    0.8892048,
    0.8797816,
    0.87,
    0.8598613,
    0.849392,
    0.838622,
    0.8275813,
    0.8163,
    0.8047947,
    0.793082,
    0.781192,
    0.7691547,
    0.757,
    0.7447541,
    0.7324224,
    0.7200036,
    0.7074965,
    0.6949,
    0.6822192,
    0.6694716,
    0.6566744,
    0.6438448,
    0.631,
    0.6181555,
    0.6053144,
    0.5924756,
    0.5796379,
    0.5668,
    0.5539611,
    0.5411372,
    0.5283528,
    0.5156323,
    0.503,
    0.4904688,
    0.4780304,
    0.4656776,
    0.4534032,
    0.4412,
    0.42908,
    0.417036,
    0.405032,
    0.393032,
    0.381,
    0.3689184,
    0.3568272,
    0.3447768,
    0.3328176,
    0.321,
    0.3093381,
    0.2978504,
    0.2865936,
    0.2756245,
    0.265,
    0.2547632,
    0.2448896,
    0.2353344,
    0.2260528,
    0.217,
    0.2081616,
    0.1995488,
    0.1911552,
    0.1829744,
    0.175,
    0.1672235,
    0.1596464,
    0.1522776,
    0.1451259,
    0.1382,
    0.1315003,
    0.1250248,
    0.1187792,
    0.1127691,
    0.107,
    0.1014762,
    0.09618864,
    0.09112296,
    0.08626485,
    0.0816,
    0.07712064,
    0.07282552,
    0.06871008,
    0.06476976,
    0.061,
    0.05739621,
    0.05395504,
    0.05067376,
    0.04754965,
    0.04458,
    0.04175872,
    0.03908496,
    0.03656384,
    0.03420048,
    0.032,
    0.02996261,
    0.02807664,
    0.02632936,
    0.02470805,
    0.0232,
    0.02180077,
    0.02050112,
    0.01928108,
    0.01812069,
    0.017,
    0.01590379,
    0.01483718,
    0.01381068,
    0.01283478,
    0.01192,
    0.01106831,
    0.01027339,
    0.009533311,
    0.008846157,
    0.00821,
    0.007623781,
    0.007085424,
    0.006591476,
    0.006138485,
    0.005723,
    0.005343059,
    0.004995796,
    0.004676404,
    0.004380075,
    0.004102,
    0.003838453,
    0.003589099,
    0.003354219,
    0.003134093,
    0.002929,
    0.002738139,
    0.002559876,
    0.002393244,
    0.002237275,
    0.002091,
    0.001953587,
    0.00182458,
    0.00170358,
    0.001590187,
    0.001484,
    0.001384496,
    0.001291268,
    0.001204092,
    0.001122744,
    0.001047,
    0.0009765896,
    0.0009111088,
    0.0008501332,
    0.0007932384,
    0.00074,
    0.0006900827,
    0.00064331,
    0.000599496,
    0.0005584547,
    0.00052,
    0.0004839136,
    0.0004500528,
    0.0004183452,
    0.0003887184,
    0.0003611,
    0.0003353835,
    0.0003114404,
    0.0002891656,
    0.0002684539,
    0.0002492,
    0.0002313019,
    0.0002146856,
    0.0001992884,
    0.0001850475,
    0.0001719,
    0.0001597781,
    0.0001486044,
    0.0001383016,
    0.0001287925,
    0.00012,
    0.0001118595,
    0.0001043224,
    9.73356E-005,
    9.084587E-005,
    0.0000848,
    7.914667E-005,
    0.000073858,
    0.000068916,
    6.430267E-005,
    0.00006,
    5.598187E-005,
    5.22256E-005,
    4.87184E-005,
    4.544747E-005,
    0.0000424,
    0.000039561,
    3.691512E-005,
    3.444868E-005,
    3.214816E-005,
    0.00003,
    2.799125E-005,
    2.611356E-005,
    2.436024E-005,
    2.272461E-005,
    0.0000212,
    1.977855E-005,
    1.845285E-005,
    1.721687E-005,
    1.606459E-005,
    0.00001499,
    1.398728E-005,
    1.305155E-005,
    1.217818E-005,
    1.136254E-005,
    0.0000106,
    9.885877E-006,
    9.217304E-006,
    8.592362E-006,
    8.009133E-006,
    7.4657E-006,
    6.959567E-006,
    0.000006488,
    6.048699E-006,
    5.639396E-006,
    5.2578E-006,
    4.901771E-006,
    4.56972E-006,
    4.260194E-006,
    3.971739E-006,
    3.7029E-006,
    3.452163E-006,
    3.218302E-006,
    3.0003E-006,
    2.797139E-006,
    2.6078E-006,
    2.43122E-006,
    2.266531E-006,
    0.000002113,
    1.969943E-006,
    1.8366E-006,
    1.71223E-006,
    1.596228E-006,
    1.48809E-006,
    1.387314E-006,
    1.2934E-006,
    1.20582E-006,
    1.124143E-006,
    0.000001048,
    9.770578E-007,
    9.1093E-007,
    8.492513E-007,
    7.917212E-007,
    7.380904E-007,
    6.881098E-007,
    6.4153E-007,
    5.980895E-007,
    5.575746E-007,
    5.19808E-007,
    4.846123E-007,
    4.5181E-007
};


//CIE 2 degree Z spectral matching curve
//from  http://www.cis.rit.edu/research/mcsl2/online/CIE/all_1nm_data.xls
static const float Z_BAR_2_DEG_MIN  = 360.0f;
static const float Z_BAR_2_DEG_MAX  = 830.0f;
static const float Z_BAR_2_DEG_STEP = 1.0f;
static const int Z_BAR_2_N = 471;
static const float Z_BAR_2_DEG[471] = {
    0.0006061,
    0.0006808792,
    0.0007651456,
    0.0008600124,
    0.0009665928,
    0.001086,
    0.001220586,
    0.001372729,
    0.001543579,
    0.001734286,
    0.001946,
    0.002177777,
    0.002435809,
    0.002731953,
    0.003078064,
    0.003486,
    0.003975227,
    0.00454088,
    0.00515832,
    0.005802907,
    0.006450001,
    0.007083216,
    0.007745488,
    0.008501152,
    0.009414544,
    0.01054999,
    0.0119658,
    0.01365587,
    0.01558805,
    0.01773015,
    0.02005001,
    0.02251136,
    0.02520288,
    0.02827972,
    0.03189704,
    0.03621,
    0.04143771,
    0.04750372,
    0.05411988,
    0.06099803,
    0.06785001,
    0.07448632,
    0.08136156,
    0.08915364,
    0.09854048,
    0.1102,
    0.1246133,
    0.1417017,
    0.1613035,
    0.1832568,
    0.2074,
    0.2336921,
    0.2626114,
    0.2947746,
    0.3307985,
    0.3713,
    0.4162091,
    0.4654642,
    0.5196948,
    0.5795303,
    0.6456,
    0.7184838,
    0.7967133,
    0.8778459,
    0.959439,
    1.0390501,
    1.1153673,
    1.1884971,
    1.2581233,
    1.3239296,
    1.3856,
    1.4426352,
    1.4948035,
    1.5421903,
    1.5848807,
    1.62296,
    1.6564048,
    1.6852959,
    1.7098745,
    1.7303821,
    1.74706,
    1.7600446,
    1.7696233,
    1.7762637,
    1.7804334,
    1.7826,
    1.7829682,
    1.7816998,
    1.7791982,
    1.7758671,
    1.77211,
    1.7682589,
    1.764039,
    1.7589438,
    1.7524663,
    1.7441,
    1.7335595,
    1.7208581,
    1.7059369,
    1.6887372,
    1.6692,
    1.6475287,
    1.6234127,
    1.5960223,
    1.564528,
    1.5281,
    1.4861114,
    1.4395215,
    1.3898799,
    1.3387362,
    1.28764,
    1.2374223,
    1.1878243,
    1.1387611,
    1.090148,
    1.0419,
    0.9941976,
    0.9473473,
    0.9014531,
    0.8566193,
    0.8129501,
    0.7705173,
    0.7294448,
    0.6899136,
    0.6521049,
    0.6162,
    0.5823286,
    0.5504162,
    0.5203376,
    0.4919673,
    0.46518,
    0.4399246,
    0.4161836,
    0.3938822,
    0.3729459,
    0.3533,
    0.3348578,
    0.3175521,
    0.3013375,
    0.2861686,
    0.272,
    0.2588171,
    0.2464838,
    0.2347718,
    0.2234533,
    0.2123,
    0.2011692,
    0.1901196,
    0.1792254,
    0.1685608,
    0.1582,
    0.1481383,
    0.1383758,
    0.1289942,
    0.1200751,
    0.1117,
    0.1039048,
    0.09666748,
    0.08998272,
    0.08384531,
    0.07824999,
    0.07320899,
    0.06867816,
    0.06456784,
    0.06078835,
    0.05725001,
    0.05390435,
    0.05074664,
    0.04775276,
    0.04489859,
    0.04216,
    0.03950728,
    0.03693564,
    0.03445836,
    0.03208872,
    0.02984,
    0.02771181,
    0.02569444,
    0.02378716,
    0.02198925,
    0.0203,
    0.01871805,
    0.01724036,
    0.01586364,
    0.01458461,
    0.0134,
    0.01230723,
    0.01130188,
    0.01037792,
    0.009529306,
    0.008749999,
    0.0080352,
    0.0073816,
    0.0067854,
    0.0062428,
    0.005749999,
    0.0053036,
    0.0048998,
    0.0045342,
    0.0042024,
    0.0039,
    0.0036232,
    0.0033706,
    0.0031414,
    0.0029348,
    0.002749999,
    0.0025852,
    0.0024386,
    0.0023094,
    0.0021968,
    0.0021,
    0.002017733,
    0.0019482,
    0.0018898,
    0.001840933,
    0.0018,
    0.001766267,
    0.0017378,
    0.0017112,
    0.001683067,
    0.001650001,
    0.001610133,
    0.0015644,
    0.0015136,
    0.001458533,
    0.0014,
    0.001336667,
    0.00127,
    0.001205,
    0.001146667,
    0.0011,
    0.0010688,
    0.0010494,
    0.0010356,
    0.0010212,
    0.001,
    0.00096864,
    0.00092992,
    0.00088688,
    0.00084256,
    0.0008,
    0.00076096,
    0.00072368,
    0.00068592,
    0.00064544,
    0.0006,
    0.0005478667,
    0.0004916,
    0.0004354,
    0.0003834667,
    0.00034,
    0.0003072533,
    0.00028316,
    0.00026544,
    0.0002518133,
    0.00024,
    0.0002295467,
    0.00022064,
    0.00021196,
    0.0002021867,
    0.00019,
    0.0001742133,
    0.00015564,
    0.00013596,
    0.0001168533,
    0.0001,
    8.613333E-005,
    0.0000746,
    0.000065,
    5.693333E-005,
    0.00005,
    0.00004416,
    0.00003948,
    0.00003572,
    0.00003264,
    0.00003,
    2.765333E-005,
    0.00002556,
    0.00002364,
    2.181333E-005,
    0.00002,
    1.813333E-005,
    0.0000162,
    0.0000142,
    1.213333E-005,
    0.00001,
    7.733333E-006,
    0.0000054,
    0.0000032,
    1.333333E-006,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0
};



//CIE 10 degree X spectral matching curve
//from  http://www.cis.rit.edu/research/mcsl2/online/CIE/all_1nm_data.xls
static const float X_BAR_10_DEG_MIN  = 360.0f;
static const float X_BAR_10_DEG_MAX  = 830.0f;
static const float X_BAR_10_DEG_STEP = 1.0f;
static const int X_BAR_10_N = 471;
static const float X_BAR_10_DEG[471] = {
    1.222E-007,
    1.85138E-007,
    2.7883E-007,
    4.1747E-007,
    6.2133E-007,
    9.1927E-007,
    0.000001352,
    1.97654E-006,
    2.8725E-006,
    4.1495E-006,
    5.9586E-006,
    8.5056E-006,
    1.20686E-005,
    1.70226E-005,
    0.000023868,
    0.000033266,
    0.000046087,
    0.000063472,
    0.000086892,
    0.000118246,
    0.000159952,
    0.00021508,
    0.00028749,
    0.00038199,
    0.00050455,
    0.00066244,
    0.0008645,
    0.0011215,
    0.00144616,
    0.00185359,
    0.0023616,
    0.0029906,
    0.0037645,
    0.0047102,
    0.0058581,
    0.0072423,
    0.0088996,
    0.0108709,
    0.0131989,
    0.0159292,
    0.0191097,
    0.022788,
    0.027011,
    0.031829,
    0.037278,
    0.0434,
    0.050223,
    0.057764,
    0.066038,
    0.075033,
    0.084736,
    0.095041,
    0.105836,
    0.117066,
    0.128682,
    0.140638,
    0.152893,
    0.165416,
    0.178191,
    0.191214,
    0.204492,
    0.21765,
    0.230267,
    0.242311,
    0.253793,
    0.264737,
    0.275195,
    0.285301,
    0.295143,
    0.304869,
    0.314679,
    0.324355,
    0.33357,
    0.342243,
    0.350312,
    0.357719,
    0.364482,
    0.370493,
    0.375727,
    0.380158,
    0.383734,
    0.386327,
    0.387858,
    0.388396,
    0.387978,
    0.386726,
    0.384696,
    0.382006,
    0.378709,
    0.374915,
    0.370702,
    0.366089,
    0.361045,
    0.355518,
    0.349486,
    0.342957,
    0.335893,
    0.328284,
    0.32015,
    0.311475,
    0.302273,
    0.292858,
    0.283502,
    0.274044,
    0.264263,
    0.254085,
    0.243392,
    0.232187,
    0.220488,
    0.208198,
    0.195618,
    0.183034,
    0.170222,
    0.157348,
    0.14465,
    0.132349,
    0.120584,
    0.109456,
    0.099042,
    0.089388,
    0.080507,
    0.072034,
    0.06371,
    0.055694,
    0.048117,
    0.041072,
    0.034642,
    0.028896,
    0.023876,
    0.019628,
    0.016172,
    0.0133,
    0.010759,
    0.008542,
    0.006661,
    0.005132,
    0.003982,
    0.003239,
    0.002934,
    0.003114,
    0.003816,
    0.005095,
    0.006936,
    0.009299,
    0.012147,
    0.015444,
    0.019156,
    0.02325,
    0.02769,
    0.032444,
    0.037465,
    0.042956,
    0.049114,
    0.05592,
    0.063349,
    0.071358,
    0.079901,
    0.088909,
    0.098293,
    0.107949,
    0.117749,
    0.127839,
    0.13845,
    0.149516,
    0.161041,
    0.172953,
    0.185209,
    0.197755,
    0.210538,
    0.22346,
    0.236491,
    0.249633,
    0.262972,
    0.276515,
    0.290269,
    0.304213,
    0.318361,
    0.332705,
    0.347232,
    0.361926,
    0.376772,
    0.391683,
    0.406594,
    0.421539,
    0.436517,
    0.451584,
    0.466782,
    0.482147,
    0.497738,
    0.513606,
    0.529826,
    0.54644,
    0.563426,
    0.580726,
    0.59829,
    0.616053,
    0.633948,
    0.651901,
    0.669824,
    0.687632,
    0.705224,
    0.722773,
    0.740483,
    0.758273,
    0.776083,
    0.793832,
    0.811436,
    0.828822,
    0.845879,
    0.862525,
    0.878655,
    0.894208,
    0.909206,
    0.923672,
    0.937638,
    0.951162,
    0.964283,
    0.977068,
    0.98959,
    1.00191,
    1.01416,
    1.0265,
    1.0388,
    1.051,
    1.0629,
    1.0743,
    1.0852,
    1.0952,
    1.1042,
    1.112,
    1.11852,
    1.1238,
    1.128,
    1.1311,
    1.1332,
    1.1343,
    1.1343,
    1.1333,
    1.1312,
    1.1281,
    1.12399,
    1.1189,
    1.1129,
    1.1059,
    1.098,
    1.0891,
    1.0792,
    1.0684,
    1.0567,
    1.044,
    1.03048,
    1.016,
    1.0008,
    0.98479,
    0.96808,
    0.95074,
    0.9328,
    0.91434,
    0.89539,
    0.87603,
    0.856297,
    0.83635,
    0.81629,
    0.79605,
    0.77561,
    0.75493,
    0.73399,
    0.71278,
    0.69129,
    0.66952,
    0.647467,
    0.62511,
    0.60252,
    0.57989,
    0.55737,
    0.53511,
    0.51324,
    0.49186,
    0.47108,
    0.45096,
    0.431567,
    0.41287,
    0.39475,
    0.37721,
    0.36019,
    0.34369,
    0.32769,
    0.31217,
    0.29711,
    0.2825,
    0.268329,
    0.25459,
    0.2413,
    0.22848,
    0.21614,
    0.2043,
    0.19295,
    0.18211,
    0.17177,
    0.16192,
    0.152568,
    0.14367,
    0.1352,
    0.12713,
    0.11948,
    0.11221,
    0.10531,
    0.098786,
    0.09261,
    0.086773,
    0.0812606,
    0.076048,
    0.071114,
    0.066454,
    0.062062,
    0.05793,
    0.05405,
    0.050412,
    0.047006,
    0.043823,
    0.0408508,
    0.038072,
    0.035468,
    0.033031,
    0.030753,
    0.028623,
    0.026635,
    0.024781,
    0.023052,
    0.021441,
    0.0199413,
    0.018544,
    0.017241,
    0.016027,
    0.014896,
    0.013842,
    0.012862,
    0.011949,
    0.0111,
    0.010311,
    0.00957688,
    0.008894,
    0.0082581,
    0.0076664,
    0.0071163,
    0.0066052,
    0.0061306,
    0.0056903,
    0.0052819,
    0.0049033,
    0.00455263,
    0.0042275,
    0.0039258,
    0.0036457,
    0.0033859,
    0.0031447,
    0.0029208,
    0.002713,
    0.0025202,
    0.0023411,
    0.00217496,
    0.0020206,
    0.0018773,
    0.0017441,
    0.0016205,
    0.0015057,
    0.0013992,
    0.0013004,
    0.0012087,
    0.0011236,
    0.00104476,
    0.00097156,
    0.0009036,
    0.00084048,
    0.00078187,
    0.00072745,
    0.0006769,
    0.00062996,
    0.00058637,
    0.00054587,
    0.000508258,
    0.0004733,
    0.0004408,
    0.00041058,
    0.00038249,
    0.00035638,
    0.00033211,
    0.00030955,
    0.00028858,
    0.00026909,
    0.000250969,
    0.00023413,
    0.00021847,
    0.00020391,
    0.00019035,
    0.00017773,
    0.00016597,
    0.00015502,
    0.0001448,
    0.00013528,
    0.00012639,
    0.0001181,
    0.00011037,
    0.00010315,
    0.000096427,
    0.000090151,
    0.000084294,
    0.00007883,
    0.000073729,
    0.000068969,
    6.45258E-005,
    0.000060376,
    0.0000565,
    0.00005288,
    0.000049498,
    0.000046339,
    0.000043389,
    0.000040634,
    0.00003806,
    0.000035657,
    3.34117E-005,
    0.000031315,
    0.000029355,
    0.000027524,
    0.000025811,
    0.000024209,
    0.000022711,
    0.000021308,
    0.000019994,
    0.000018764,
    1.76115E-005,
    0.000016532,
    0.000015521,
    0.000014574,
    0.000013686,
    0.000012855,
    0.000012075,
    0.000011345,
    0.000010659,
    0.000010017,
    9.41363E-006,
    8.8479E-006,
    8.3171E-006,
    0.000007819,
    7.3516E-006,
    0.000006913,
    6.5015E-006,
    6.1153E-006,
    5.7529E-006,
    5.4127E-006,
    5.09347E-006,
    4.7938E-006,
    4.5125E-006,
    4.2483E-006,
    4.0002E-006,
    3.7671E-006,
    0.000003548,
    3.3421E-006,
    3.1485E-006,
    2.9665E-006,
    2.79531E-006,
    2.6345E-006,
    2.4834E-006,
    2.3414E-006,
    2.2078E-006,
    0.000002082,
    1.9636E-006,
    1.8519E-006,
    1.7465E-006,
    1.6471E-006,
    1.55314E-006
};



//CIE 10 degree Y spectral matching curve
//from  http://www.cis.rit.edu/research/mcsl2/online/CIE/all_1nm_data.xls
static const float Y_BAR_10_DEG_MIN  = 360.0f;
static const float Y_BAR_10_DEG_MAX  = 830.0f;
static const float Y_BAR_10_DEG_STEP = 1.0f;
static const int Y_BAR_10_N = 471;
static const float Y_BAR_10_DEG[471] = {
    1.3398E-008,
    2.0294E-008,
    3.056E-008,
    4.574E-008,
    6.805E-008,
    1.0065E-007,
    0.000000148,
    2.1627E-007,
    3.142E-007,
    4.537E-007,
    6.511E-007,
    9.288E-007,
    1.3175E-006,
    1.8572E-006,
    0.000002602,
    0.000003625,
    0.000005019,
    0.000006907,
    0.000009449,
    0.000012848,
    0.000017364,
    0.000023327,
    0.00003115,
    0.00004135,
    0.00005456,
    0.00007156,
    0.0000933,
    0.00012087,
    0.00015564,
    0.0001992,
    0.0002534,
    0.0003202,
    0.0004024,
    0.0005023,
    0.0006232,
    0.0007685,
    0.0009417,
    0.0011478,
    0.0013903,
    0.001674,
    0.0020044,
    0.002386,
    0.002822,
    0.003319,
    0.00388,
    0.004509,
    0.005209,
    0.005985,
    0.006833,
    0.007757,
    0.008756,
    0.009816,
    0.010918,
    0.012058,
    0.013237,
    0.014456,
    0.015717,
    0.017025,
    0.018399,
    0.019848,
    0.021391,
    0.022992,
    0.024598,
    0.026213,
    0.027841,
    0.029497,
    0.031195,
    0.032927,
    0.034738,
    0.036654,
    0.038676,
    0.040792,
    0.042946,
    0.045114,
    0.047333,
    0.049602,
    0.051934,
    0.054337,
    0.056822,
    0.059399,
    0.062077,
    0.064737,
    0.067285,
    0.069764,
    0.072218,
    0.074704,
    0.077272,
    0.079979,
    0.082874,
    0.086,
    0.089456,
    0.092947,
    0.096275,
    0.099535,
    0.102829,
    0.106256,
    0.109901,
    0.113835,
    0.118167,
    0.122932,
    0.128201,
    0.133457,
    0.138323,
    0.143042,
    0.147787,
    0.152761,
    0.158102,
    0.163941,
    0.170362,
    0.177425,
    0.18519,
    0.193025,
    0.200313,
    0.207156,
    0.213644,
    0.21994,
    0.22617,
    0.232467,
    0.239025,
    0.245997,
    0.253589,
    0.261876,
    0.270643,
    0.279645,
    0.288694,
    0.297665,
    0.306469,
    0.315035,
    0.323335,
    0.331366,
    0.339133,
    0.34786,
    0.358326,
    0.370001,
    0.382464,
    0.395379,
    0.408482,
    0.421588,
    0.434619,
    0.447601,
    0.460777,
    0.47434,
    0.4882,
    0.50234,
    0.51674,
    0.53136,
    0.54619,
    0.56118,
    0.57629,
    0.5915,
    0.606741,
    0.62215,
    0.63783,
    0.65371,
    0.66968,
    0.68566,
    0.70155,
    0.71723,
    0.73257,
    0.74746,
    0.761757,
    0.77534,
    0.78822,
    0.80046,
    0.81214,
    0.82333,
    0.83412,
    0.8446,
    0.85487,
    0.86504,
    0.875211,
    0.88537,
    0.89537,
    0.90515,
    0.91465,
    0.92381,
    0.93255,
    0.94081,
    0.94852,
    0.9556,
    0.961988,
    0.96754,
    0.97223,
    0.97617,
    0.97946,
    0.9822,
    0.98452,
    0.98652,
    0.98832,
    0.99002,
    0.991761,
    0.99353,
    0.99523,
    0.99677,
    0.99809,
    0.99911,
    0.99977,
    1,
    0.99971,
    0.99885,
    0.99734,
    0.99526,
    0.99274,
    0.98975,
    0.9863,
    0.98238,
    0.97798,
    0.97311,
    0.96774,
    0.96189,
    0.955552,
    0.948601,
    0.940981,
    0.932798,
    0.924158,
    0.915175,
    0.905954,
    0.896608,
    0.887249,
    0.877986,
    0.868934,
    0.860164,
    0.851519,
    0.842963,
    0.834393,
    0.825623,
    0.816764,
    0.807544,
    0.797947,
    0.787893,
    0.777405,
    0.76649,
    0.755309,
    0.743845,
    0.73219,
    0.720353,
    0.708281,
    0.696055,
    0.683621,
    0.671048,
    0.658341,
    0.645545,
    0.632718,
    0.619815,
    0.606887,
    0.593878,
    0.580781,
    0.567653,
    0.55449,
    0.541228,
    0.527963,
    0.514634,
    0.501363,
    0.488124,
    0.474935,
    0.461834,
    0.448823,
    0.435917,
    0.423153,
    0.410526,
    0.398057,
    0.385835,
    0.373951,
    0.362311,
    0.350863,
    0.339554,
    0.328309,
    0.317118,
    0.305936,
    0.294737,
    0.283493,
    0.272222,
    0.26099,
    0.249877,
    0.238946,
    0.228254,
    0.217853,
    0.20778,
    0.198072,
    0.188748,
    0.179828,
    0.171285,
    0.163059,
    0.155151,
    0.147535,
    0.140211,
    0.13317,
    0.1264,
    0.119892,
    0.11364,
    0.107633,
    0.10187,
    0.096347,
    0.091063,
    0.08601,
    0.081187,
    0.076583,
    0.072198,
    0.068024,
    0.064052,
    0.060281,
    0.056697,
    0.053292,
    0.050059,
    0.046998,
    0.044096,
    0.041345,
    0.0387507,
    0.0362978,
    0.0339832,
    0.0318004,
    0.0297395,
    0.0277918,
    0.0259551,
    0.0242263,
    0.0226017,
    0.0210779,
    0.0196505,
    0.0183153,
    0.0170686,
    0.0159051,
    0.0148183,
    0.0138008,
    0.0128495,
    0.0119607,
    0.0111303,
    0.0103555,
    0.0096332,
    0.0089599,
    0.0083324,
    0.0077488,
    0.0072046,
    0.0066975,
    0.0062251,
    0.005785,
    0.0053751,
    0.0049941,
    0.0046392,
    0.0043093,
    0.0040028,
    0.00371774,
    0.00345262,
    0.00320583,
    0.00297623,
    0.00276281,
    0.00256456,
    0.00238048,
    0.00220971,
    0.00205132,
    0.00190449,
    0.00176847,
    0.00164236,
    0.00152535,
    0.00141672,
    0.00131595,
    0.00122239,
    0.00113555,
    0.00105494,
    0.00098014,
    0.00091066,
    0.00084619,
    0.00078629,
    0.00073068,
    0.00067899,
    0.00063101,
    0.00058644,
    0.00054511,
    0.00050672,
    0.00047111,
    0.00043805,
    0.00040741,
    0.000378962,
    0.000352543,
    0.000328001,
    0.000305208,
    0.000284041,
    0.000264375,
    0.000246109,
    0.000229143,
    0.000213376,
    0.00019873,
    0.000185115,
    0.000172454,
    0.000160678,
    0.00014973,
    0.00013955,
    0.000130086,
    0.00012129,
    0.000113106,
    0.000105501,
    0.000098428,
    0.000091853,
    0.000085738,
    0.000080048,
    0.000074751,
    0.000069819,
    0.000065222,
    0.000060939,
    0.000056942,
    0.000053217,
    0.000049737,
    0.000046491,
    0.000043464,
    0.000040635,
    0.000038,
    3.55405E-005,
    3.32448E-005,
    3.11006E-005,
    0.000029099,
    2.72307E-005,
    0.000025486,
    2.38561E-005,
    2.23332E-005,
    2.09104E-005,
    1.95808E-005,
    1.83384E-005,
    1.71777E-005,
    1.60934E-005,
    0.00001508,
    1.41336E-005,
    0.000013249,
    1.24226E-005,
    1.16499E-005,
    1.09277E-005,
    1.02519E-005,
    9.6196E-006,
    9.0281E-006,
    0.000008474,
    7.9548E-006,
    7.4686E-006,
    7.0128E-006,
    6.5858E-006,
    6.1857E-006,
    5.8107E-006,
    0.000005459,
    5.1298E-006,
    4.8206E-006,
    4.5312E-006,
    4.2591E-006,
    4.0042E-006,
    3.76473E-006,
    0.00000354,
    3.32914E-006,
    3.13115E-006,
    2.94529E-006,
    2.77081E-006,
    2.60705E-006,
    2.45329E-006,
    2.30894E-006,
    2.17338E-006,
    2.04613E-006,
    1.92662E-006,
    1.8144E-006,
    0.000001709,
    1.60988E-006,
    1.51677E-006,
    1.42921E-006,
    1.34686E-006,
    1.26945E-006,
    1.19662E-006,
    1.12809E-006,
    1.06368E-006,
    1.00313E-006,
    9.4622E-007,
    8.9263E-007,
    8.4216E-007,
    7.9464E-007,
    7.4978E-007,
    7.0744E-007,
    6.6748E-007,
    6.297E-007
};





//CIE 10 degree Z spectral matching curve
//from  http://www.cis.rit.edu/research/mcsl2/online/CIE/all_1nm_data.xls
static const float Z_BAR_10_DEG_MIN  = 360.0f;
static const float Z_BAR_10_DEG_MAX  = 559.0f;
static const float Z_BAR_10_DEG_STEP = 1.0f;
static const int Z_BAR_10_N = 201;
static const float Z_BAR_10_DEG[201] = {
    0.000000535,
    8.1072E-007,
    1.2212E-006,
    1.8287E-006,
    2.7222E-006,
    4.0283E-006,
    5.9257E-006,
    8.6651E-006,
    0.000012596,
    0.000018201,
    2.61437E-005,
    0.00003733,
    0.000052987,
    0.000074764,
    0.00010487,
    0.00014622,
    0.00020266,
    0.00027923,
    0.00038245,
    0.00052072,
    0.000704776,
    0.00094823,
    0.0012682,
    0.0016861,
    0.0022285,
    0.0029278,
    0.0038237,
    0.0049642,
    0.0064067,
    0.0082193,
    0.0104822,
    0.013289,
    0.016747,
    0.02098,
    0.026127,
    0.032344,
    0.039802,
    0.048691,
    0.05921,
    0.071576,
    0.0860109,
    0.10274,
    0.122,
    0.14402,
    0.16899,
    0.19712,
    0.22857,
    0.26347,
    0.3019,
    0.34387,
    0.389366,
    0.43797,
    0.48922,
    0.5429,
    0.59881,
    0.65676,
    0.71658,
    0.77812,
    0.84131,
    0.90611,
    0.972542,
    1.0389,
    1.1031,
    1.1651,
    1.2249,
    1.2825,
    1.3382,
    1.3926,
    1.4461,
    1.4994,
    1.55348,
    1.6072,
    1.6589,
    1.7082,
    1.7548,
    1.7985,
    1.8392,
    1.8766,
    1.9105,
    1.9408,
    1.96728,
    1.9891,
    2.0057,
    2.0174,
    2.0244,
    2.0273,
    2.0264,
    2.0223,
    2.0153,
    2.006,
    1.9948,
    1.9814,
    1.9653,
    1.9464,
    1.9248,
    1.9007,
    1.8741,
    1.8451,
    1.8139,
    1.7806,
    1.74537,
    1.7091,
    1.6723,
    1.6347,
    1.5956,
    1.5549,
    1.5122,
    1.4673,
    1.4199,
    1.37,
    1.31756,
    1.2624,
    1.205,
    1.1466,
    1.088,
    1.0302,
    0.97383,
    0.91943,
    0.86746,
    0.81828,
    0.772125,
    0.72829,
    0.68604,
    0.64553,
    0.60685,
    0.57006,
    0.53522,
    0.50234,
    0.4714,
    0.44239,
    0.415254,
    0.390024,
    0.366399,
    0.344015,
    0.322689,
    0.302356,
    0.283036,
    0.264816,
    0.247848,
    0.232318,
    0.218502,
    0.205851,
    0.193596,
    0.181736,
    0.170281,
    0.159249,
    0.148673,
    0.138609,
    0.129096,
    0.120215,
    0.112044,
    0.10471,
    0.098196,
    0.092361,
    0.087088,
    0.082248,
    0.077744,
    0.073456,
    0.069268,
    0.06506,
    0.060709,
    0.056457,
    0.052609,
    0.049122,
    0.045954,
    0.04305,
    0.040368,
    0.037839,
    0.035384,
    0.032949,
    0.030451,
    0.028029,
    0.025862,
    0.02392,
    0.022174,
    0.020584,
    0.019127,
    0.01774,
    0.016403,
    0.015064,
    0.013676,
    0.012308,
    0.011056,
    0.009915,
    0.008872,
    0.007918,
    0.00703,
    0.006223,
    0.005453,
    0.004714,
    0.003988,
    0.003289,
    0.002646,
    0.002063,
    0.001533,
    0.001091,
    0.000711,
    0.000407,
    0.000184,
    0.000047
};



//CIE 1951 Scotopic Vision V'(lambda)
//http://www.cvrl.org/
//380 to 780 in 1 degree increments
//from crvl.rg
//380 to 780 by 1's
static const float SCOTOPIC_MIN  = 380.0f;
static const float SCOTOPIC_MAX  = 780.0f;
static const float SCOTOPIC_STEP = 1.0f;
static const int SCOTOPIC_N      = 402;
static const float SCOTOPIC_DATA[402] = {
    0.0005890000f, //380
    0.0006650000f, //381
    0.0007520000f,
    0.0008540000f,
    0.0009720000f,
    0.0011080000f,
    0.0012680000f,
    0.0014530000f,
    0.0016680000f,
    0.0019180000f,
    0.0022090000f,
    0.0025470000f,
    0.0029390000f,
    0.0033940000f,
    0.0039210000f,
    0.0045300000f,
    0.0052400000f,
    0.0060500000f,
    0.0069800000f,
    0.0080600000f,
    0.0092900000f,
    0.0107000000f,
    0.0123100000f,
    0.0141300000f,
    0.0161900000f,
    0.0185200000f,
    0.0211300000f,
    0.0240500000f,
    0.0273000000f,
    0.0308900000f,
    0.0348400000f,
    0.0391600000f,
    0.0439000000f,
    0.0490000000f,
    0.0545000000f,
    0.0604000000f,
    0.0668000000f,
    0.0736000000f,
    0.0808000000f,
    0.0885000000f,
    0.0966000000f,
    0.1052000000f,
    0.1141000000f,
    0.1235000000f,
    0.1334000000f,
    0.1436000000f,
    0.1541000000f,
    0.1651000000f,
    0.1764000000f,
    0.1879000000f,
    0.1998000000f,
    0.2119000000f,
    0.2243000000f,
    0.2369000000f,
    0.2496000000f,
    0.2625000000f,
    0.2755000000f,
    0.2886000000f,
    0.3017000000f,
    0.3149000000f,
    0.3281000000f,
    0.3412000000f,
    0.3543000000f,
    0.3673000000f,
    0.3803000000f,
    0.3931000000f,
    0.4060000000f,
    0.4180000000f,
    0.4310000000f,
    0.4430000000f,
    0.4550000000f,
    0.4670000000f,
    0.4790000000f,
    0.4900000000f,
    0.5020000000f,
    0.5130000000f,
    0.5240000000f,
    0.5350000000f,
    0.5460000000f,
    0.5570000000f,
    0.5670000000f,
    0.5780000000f,
    0.5880000000f,
    0.5990000000f,
    0.6100000000f,
    0.6200000000f,
    0.6310000000f,
    0.6420000000f,
    0.6530000000f,
    0.6640000000f,
    0.6760000000f,
    0.6870000000f,
    0.6990000000f,
    0.7100000000f,
    0.7220000000f,
    0.7340000000f,
    0.7450000000f,
    0.7570000000f,
    0.7690000000f,
    0.7810000000f,
    0.7930000000f,
    0.8050000000f,
    0.8170000000f,
    0.8280000000f,
    0.8400000000f,
    0.8510000000f,
    0.8620000000f,
    0.8730000000f,
    0.8840000000f,
    0.8940000000f,
    0.9040000000f,
    0.9140000000f,
    0.9230000000f,
    0.9320000000f,
    0.9410000000f,
    0.9490000000f,
    0.9570000000f,
    0.9640000000f,
    0.9700000000f,
    0.9760000000f,
    0.9820000000f,
    0.9860000000f,
    0.9900000000f,
    0.9940000000f,
    0.9970000000f,
    0.9980000000f,
    1.0000000000f,
    1.0000000000f,
    1.0000000000f,
    0.9980000000f,
    0.9970000000f,
    0.9940000000f,
    0.9900000000f,
    0.9860000000f,
    0.9810000000f,
    0.9750000000f,
    0.9680000000f,
    0.9610000000f,
    0.9530000000f,
    0.9440000000f,
    0.9350000000f,
    0.9250000000f,
    0.9150000000f,
    0.9040000000f,
    0.8920000000f,
    0.8800000000f,
    0.8670000000f,
    0.8540000000f,
    0.8400000000f,
    0.8260000000f,
    0.8110000000f,
    0.7960000000f,
    0.7810000000f,
    0.7650000000f,
    0.7490000000f,
    0.7330000000f,
    0.7170000000f,
    0.7000000000f,
    0.6830000000f,
    0.6670000000f,
    0.6500000000f,
    0.6330000000f,
    0.6160000000f,
    0.5990000000f,
    0.5810000000f,
    0.5640000000f,
    0.5480000000f,
    0.5310000000f,
    0.5140000000f,
    0.4970000000f,
    0.4810000000f,
    0.4650000000f,
    0.4480000000f,
    0.4330000000f,
    0.4170000000f,
    0.4020000000f,
    0.3864000000f,
    0.3715000000f,
    0.3569000000f,
    0.3427000000f,
    0.3288000000f,
    0.3151000000f,
    0.3018000000f,
    0.2888000000f,
    0.2762000000f,
    0.2639000000f,
    0.2519000000f,
    0.2403000000f,
    0.2291000000f,
    0.2182000000f,
    0.2076000000f,
    0.1974000000f,
    0.1876000000f,
    0.1782000000f,
    0.1690000000f,
    0.1602000000f,
    0.1517000000f,
    0.1436000000f,
    0.1358000000f,
    0.1284000000f,
    0.1212000000f,
    0.1143000000f,
    0.1078000000f,
    0.1015000000f,
    0.0956000000f,
    0.0899000000f,
    0.0845000000f,
    0.0793000000f,
    0.0745000000f,
    0.0699000000f,
    0.0655000000f,
    0.0613000000f,
    0.0574000000f,
    0.0537000000f,
    0.0502000000f,
    0.0469000000f,
    0.0438000000f,
    0.0409000000f,
    0.0381600000f,
    0.0355800000f,
    0.0331500000f,
    0.0308700000f,
    0.0287400000f,
    0.0267400000f,
    0.0248700000f,
    0.0231200000f,
    0.0214700000f,
    0.0199400000f,
    0.0185100000f,
    0.0171800000f,
    0.0159300000f,
    0.0147700000f,
    0.0136900000f,
    0.0126900000f,
    0.0117500000f,
    0.0108800000f,
    0.0100700000f,
    0.0093200000f,
    0.0086200000f,
    0.0079700000f,
    0.0073700000f,
    0.0068200000f,
    0.0063000000f,
    0.0058200000f,
    0.0053800000f,
    0.0049700000f,
    0.0045900000f,
    0.0042400000f,
    0.0039130000f,
    0.0036130000f,
    0.0033350000f,
    0.0030790000f,
    0.0028420000f,
    0.0026230000f,
    0.0024210000f,
    0.0022350000f,
    0.0020620000f,
    0.0019030000f,
    0.0017570000f,
    0.0016210000f,
    0.0014970000f,
    0.0013820000f,
    0.0012760000f,
    0.0011780000f,
    0.0010880000f,
    0.0010050000f,
    0.0009280000f,
    0.0008570000f,
    0.0007920000f,
    0.0007320000f,
    0.0006770000f,
    0.0006260000f,
    0.0005790000f,
    0.0005360000f,
    0.0004960000f,
    0.0004590000f,
    0.0004250000f,
    0.0003935000f,
    0.0003645000f,
    0.0003377000f,
    0.0003129000f,
    0.0002901000f,
    0.0002689000f,
    0.0002493000f,
    0.0002313000f,
    0.0002146000f,
    0.0001991000f,
    0.0001848000f,
    0.0001716000f,
    0.0001593000f,
    0.0001480000f,
    0.0001375000f,
    0.0001277000f,
    0.0001187000f,
    0.0001104000f,
    0.0001026000f,
    0.0000954000f,
    0.0000888000f,
    0.0000826000f,
    0.0000769000f,
    0.0000715000f,
    0.0000666000f,
    0.0000620000f,
    0.0000578000f,
    0.0000538000f,
    0.0000501000f,
    0.0000467000f,
    0.0000436000f,
    0.0000406000f,
    0.0000378900f,
    0.0000353300f,
    0.0000329500f,
    0.0000307500f,
    0.0000287000f,
    0.0000267900f,
    0.0000250100f,
    0.0000233600f,
    0.0000218200f,
    0.0000203800f,
    0.0000190500f,
    0.0000178000f,
    0.0000166400f,
    0.0000155600f,
    0.0000145400f,
    0.0000136000f,
    0.0000127300f,
    0.0000119100f,
    0.0000111400f,
    0.0000104300f,
    0.0000097600f,
    0.0000091400f,
    0.0000085600f,
    0.0000080200f,
    0.0000075100f,
    0.0000070400f,
    0.0000066000f,
    0.0000061800f,
    0.0000058000f,
    0.0000054400f,
    0.0000051000f,
    0.0000047800f,
    0.0000044900f,
    0.0000042100f,
    0.0000039510f,
    0.0000037090f,
    0.0000034820f,
    0.0000032700f,
    0.0000030700f,
    0.0000028840f,
    0.0000027100f,
    0.0000025460f,
    0.0000023930f,
    0.0000022500f,
    0.0000021150f,
    0.0000019890f,
    0.0000018700f,
    0.0000017590f,
    0.0000016550f,
    0.0000015570f,
    0.0000014660f,
    0.0000013790f,
    0.0000012990f,
    0.0000012230f,
    0.0000011510f,
    0.0000010840f,
    0.0000010220f,
    0.0000009620f,
    0.0000009070f,
    0.0000008550f,
    0.0000008060f,
    0.0000007600f,
    0.0000007160f,
    0.0000006750f,
    0.0000006370f,
    0.0000006010f,
    0.0000005670f,
    0.0000005350f,
    0.0000005050f,
    0.0000004770f,
    0.0000004500f,
    0.0000004250f,
    0.0000004010f,
    0.0000003790f,
    0.0000003580f,
    0.0000003382f,
    0.0000003196f,
    0.0000003021f,
    0.0000002855f,
    0.0000002699f,
    0.0000002552f,
    0.0000002413f,
    0.0000002282f,
    0.0000002159f,
    0.0000002042f,
    0.0000001932f,
    0.0000001829f,
    0.0000001731f,
    0.0000001638f,
    0.0000001551f,
    0.0000001468f,
    0.0000001390f //780
};


//CIE Photopic V(Î») modified by Judd (1951)
//http://www.cvrl.org/
//360 to 830 in 1 degree increments
static const float PHOTOPIC_MIN  = 360.0f;
static const float PHOTOPIC_MAX  = 830.0f;
static const float PHOTOPIC_STEP = 1.0f;
static const int PHOTOPIC_N      = 471;
static const float PHOTOPIC_DATA[471] = {
    0.0000039170000f, //360
    0.0000043935810f, //361
    0.0000049296040f,
    0.0000055321360f,
    0.0000062082450f,
    0.0000069650000f,
    0.0000078132190f,
    0.0000087673360f,
    0.0000098398440f,
    0.0000110432300f,
    0.0000123900000f,
    0.0000138864100f,
    0.0000155572800f,
    0.0000174429600f,
    0.0000195837500f,
    0.0000220200000f,
    0.0000248396500f,
    0.0000280412600f,
    0.0000315310400f,
    0.0000352152100f,
    0.0000390000000f,
    0.0000428264000f,
    0.0000469146000f,
    0.0000515896000f,
    0.0000571764000f,
    0.0000640000000f,
    0.0000723442100f,
    0.0000822122400f,
    0.0000935081600f,
    0.0001061361000f,
    0.0001200000000f,
    0.0001349840000f,
    0.0001514920000f,
    0.0001702080000f,
    0.0001918160000f,
    0.0002170000000f,
    0.0002469067000f,
    0.0002812400000f,
    0.0003185200000f,
    0.0003572667000f,
    0.0003960000000f,
    0.0004337147000f,
    0.0004730240000f,
    0.0005178760000f,
    0.0005722187000f,
    0.0006400000000f,
    0.0007245600000f,
    0.0008255000000f,
    0.0009411600000f,
    0.0010698800000f,
    0.0012100000000f,
    0.0013620910000f,
    0.0015307520000f,
    0.0017203680000f,
    0.0019353230000f,
    0.0021800000000f,
    0.0024548000000f,
    0.0027640000000f,
    0.0031178000000f,
    0.0035264000000f,
    0.0040000000000f,
    0.0045462400000f,
    0.0051593200000f,
    0.0058292800000f,
    0.0065461600000f,
    0.0073000000000f,
    0.0080865070000f,
    0.0089087200000f,
    0.0097676800000f,
    0.0106644300000f,
    0.0116000000000f,
    0.0125731700000f,
    0.0135827200000f,
    0.0146296800000f,
    0.0157150900000f,
    0.0168400000000f,
    0.0180073600000f,
    0.0192144800000f,
    0.0204539200000f,
    0.0217182400000f,
    0.0230000000000f,
    0.0242946100000f,
    0.0256102400000f,
    0.0269585700000f,
    0.0283512500000f,
    0.0298000000000f,
    0.0313108300000f,
    0.0328836800000f,
    0.0345211200000f,
    0.0362257100000f,
    0.0380000000000f,
    0.0398466700000f,
    0.0417680000000f,
    0.0437660000000f,
    0.0458426700000f,
    0.0480000000000f,
    0.0502436800000f,
    0.0525730400000f,
    0.0549805600000f,
    0.0574587200000f,
    0.0600000000000f,
    0.0626019700000f,
    0.0652775200000f,
    0.0680420800000f,
    0.0709110900000f,
    0.0739000000000f,
    0.0770160000000f,
    0.0802664000000f,
    0.0836668000000f,
    0.0872328000000f,
    0.0909800000000f,
    0.0949175500000f,
    0.0990458400000f,
    0.1033674000000f,
    0.1078846000000f,
    0.1126000000000f,
    0.1175320000000f,
    0.1226744000000f,
    0.1279928000000f,
    0.1334528000000f,
    0.1390200000000f,
    0.1446764000000f,
    0.1504693000000f,
    0.1564619000000f,
    0.1627177000000f,
    0.1693000000000f,
    0.1762431000000f,
    0.1835581000000f,
    0.1912735000000f,
    0.1994180000000f,
    0.2080200000000f,
    0.2171199000000f,
    0.2267345000000f,
    0.2368571000000f,
    0.2474812000000f,
    0.2586000000000f,
    0.2701849000000f,
    0.2822939000000f,
    0.2950505000000f,
    0.3085780000000f,
    0.3230000000000f,
    0.3384021000000f,
    0.3546858000000f,
    0.3716986000000f,
    0.3892875000000f,
    0.4073000000000f,
    0.4256299000000f,
    0.4443096000000f,
    0.4633944000000f,
    0.4829395000000f,
    0.5030000000000f,
    0.5235693000000f,
    0.5445120000000f,
    0.5656900000000f,
    0.5869653000000f,
    0.6082000000000f,
    0.6293456000000f,
    0.6503068000000f,
    0.6708752000000f,
    0.6908424000000f,
    0.7100000000000f,
    0.7281852000000f,
    0.7454636000000f,
    0.7619694000000f,
    0.7778368000000f,
    0.7932000000000f,
    0.8081104000000f,
    0.8224962000000f,
    0.8363068000000f,
    0.8494916000000f,
    0.8620000000000f,
    0.8738108000000f,
    0.8849624000000f,
    0.8954936000000f,
    0.9054432000000f,
    0.9148501000000f,
    0.9237348000000f,
    0.9320924000000f,
    0.9399226000000f,
    0.9472252000000f,
    0.9540000000000f,
    0.9602561000000f,
    0.9660074000000f,
    0.9712606000000f,
    0.9760225000000f,
    0.9803000000000f,
    0.9840924000000f,
    0.9874182000000f,
    0.9903128000000f,
    0.9928116000000f,
    0.9949501000000f,
    0.9967108000000f,
    0.9980983000000f,
    0.9991120000000f,
    0.9997482000000f,
    1.0000000000000f,
    0.9998567000000f,
    0.9993046000000f,
    0.9983255000000f,
    0.9968987000000f,
    0.9950000000000f,
    0.9926005000000f,
    0.9897426000000f,
    0.9864444000000f,
    0.9827241000000f,
    0.9786000000000f,
    0.9740837000000f,
    0.9691712000000f,
    0.9638568000000f,
    0.9581349000000f,
    0.9520000000000f,
    0.9454504000000f,
    0.9384992000000f,
    0.9311628000000f,
    0.9234576000000f,
    0.9154000000000f,
    0.9070064000000f,
    0.8982772000000f,
    0.8892048000000f,
    0.8797816000000f,
    0.8700000000000f,
    0.8598613000000f,
    0.8493920000000f,
    0.8386220000000f,
    0.8275813000000f,
    0.8163000000000f,
    0.8047947000000f,
    0.7930820000000f,
    0.7811920000000f,
    0.7691547000000f,
    0.7570000000000f,
    0.7447541000000f,
    0.7324224000000f,
    0.7200036000000f,
    0.7074965000000f,
    0.6949000000000f,
    0.6822192000000f,
    0.6694716000000f,
    0.6566744000000f,
    0.6438448000000f,
    0.6310000000000f,
    0.6181555000000f,
    0.6053144000000f,
    0.5924756000000f,
    0.5796379000000f,
    0.5668000000000f,
    0.5539611000000f,
    0.5411372000000f,
    0.5283528000000f,
    0.5156323000000f,
    0.5030000000000f,
    0.4904688000000f,
    0.4780304000000f,
    0.4656776000000f,
    0.4534032000000f,
    0.4412000000000f,
    0.4290800000000f,
    0.4170360000000f,
    0.4050320000000f,
    0.3930320000000f,
    0.3810000000000f,
    0.3689184000000f,
    0.3568272000000f,
    0.3447768000000f,
    0.3328176000000f,
    0.3210000000000f,
    0.3093381000000f,
    0.2978504000000f,
    0.2865936000000f,
    0.2756245000000f,
    0.2650000000000f,
    0.2547632000000f,
    0.2448896000000f,
    0.2353344000000f,
    0.2260528000000f,
    0.2170000000000f,
    0.2081616000000f,
    0.1995488000000f,
    0.1911552000000f,
    0.1829744000000f,
    0.1750000000000f,
    0.1672235000000f,
    0.1596464000000f,
    0.1522776000000f,
    0.1451259000000f,
    0.1382000000000f,
    0.1315003000000f,
    0.1250248000000f,
    0.1187792000000f,
    0.1127691000000f,
    0.1070000000000f,
    0.1014762000000f,
    0.0961886400000f,
    0.0911229600000f,
    0.0862648500000f,
    0.0816000000000f,
    0.0771206400000f,
    0.0728255200000f,
    0.0687100800000f,
    0.0647697600000f,
    0.0610000000000f,
    0.0573962100000f,
    0.0539550400000f,
    0.0506737600000f,
    0.0475496500000f,
    0.0445800000000f,
    0.0417587200000f,
    0.0390849600000f,
    0.0365638400000f,
    0.0342004800000f,
    0.0320000000000f,
    0.0299626100000f,
    0.0280766400000f,
    0.0263293600000f,
    0.0247080500000f,
    0.0232000000000f,
    0.0218007700000f,
    0.0205011200000f,
    0.0192810800000f,
    0.0181206900000f,
    0.0170000000000f,
    0.0159037900000f,
    0.0148371800000f,
    0.0138106800000f,
    0.0128347800000f,
    0.0119200000000f,
    0.0110683100000f,
    0.0102733900000f,
    0.0095333110000f,
    0.0088461570000f,
    0.0082100000000f,
    0.0076237810000f,
    0.0070854240000f,
    0.0065914760000f,
    0.0061384850000f,
    0.0057230000000f,
    0.0053430590000f,
    0.0049957960000f,
    0.0046764040000f,
    0.0043800750000f,
    0.0041020000000f,
    0.0038384530000f,
    0.0035890990000f,
    0.0033542190000f,
    0.0031340930000f,
    0.0029290000000f,
    0.0027381390000f,
    0.0025598760000f,
    0.0023932440000f,
    0.0022372750000f,
    0.0020910000000f,
    0.0019535870000f,
    0.0018245800000f,
    0.0017035800000f,
    0.0015901870000f,
    0.0014840000000f,
    0.0013844960000f,
    0.0012912680000f,
    0.0012040920000f,
    0.0011227440000f,
    0.0010470000000f,
    0.0009765896000f,
    0.0009111088000f,
    0.0008501332000f,
    0.0007932384000f,
    0.0007400000000f,
    0.0006900827000f,
    0.0006433100000f,
    0.0005994960000f,
    0.0005584547000f,
    0.0005200000000f,
    0.0004839136000f,
    0.0004500528000f,
    0.0004183452000f,
    0.0003887184000f,
    0.0003611000000f,
    0.0003353835000f,
    0.0003114404000f,
    0.0002891656000f,
    0.0002684539000f,
    0.0002492000000f,
    0.0002313019000f,
    0.0002146856000f,
    0.0001992884000f,
    0.0001850475000f,
    0.0001719000000f,
    0.0001597781000f,
    0.0001486044000f,
    0.0001383016000f,
    0.0001287925000f,
    0.0001200000000f,
    0.0001118595000f,
    0.0001043224000f,
    0.0000973356000f,
    0.0000908458700f,
    0.0000848000000f,
    0.0000791466700f,
    0.0000738580000f,
    0.0000689160000f,
    0.0000643026700f,
    0.0000600000000f,
    0.0000559818700f,
    0.0000522256000f,
    0.0000487184000f,
    0.0000454474700f,
    0.0000424000000f,
    0.0000395610400f,
    0.0000369151200f,
    0.0000344486800f,
    0.0000321481600f,
    0.0000300000000f,
    0.0000279912500f,
    0.0000261135600f,
    0.0000243602400f,
    0.0000227246100f,
    0.0000212000000f,
    0.0000197785500f,
    0.0000184528500f,
    0.0000172168700f,
    0.0000160645900f,
    0.0000149900000f,
    0.0000139872800f,
    0.0000130515500f,
    0.0000121781800f,
    0.0000113625400f,
    0.0000106000000f,
    0.0000098858770f,
    0.0000092173040f,
    0.0000085923620f,
    0.0000080091330f,
    0.0000074657000f,
    0.0000069595670f,
    0.0000064879950f,
    0.0000060486990f,
    0.0000056393960f,
    0.0000052578000f,
    0.0000049017710f,
    0.0000045697200f,
    0.0000042601940f,
    0.0000039717390f,
    0.0000037029000f,
    0.0000034521630f,
    0.0000032183020f,
    0.0000030003000f,
    0.0000027971390f,
    0.0000026078000f,
    0.0000024312200f,
    0.0000022665310f,
    0.0000021130130f,
    0.0000019699430f,
    0.0000018366000f,
    0.0000017122300f,
    0.0000015962280f,
    0.0000014880900f,
    0.0000013873140f,
    0.0000012934000f,
    0.0000012058200f,
    0.0000011241430f,
    0.0000010480090f,
    0.0000009770578f,
    0.0000009109300f,
    0.0000008492513f,
    0.0000007917212f,
    0.0000007380904f,
    0.0000006881098f,
    0.0000006415300f,
    0.0000005980895f,
    0.0000005575746f,
    0.0000005198080f,
    0.0000004846123f,
    0.0000004518100f //830
};


CMF getCMF(CMF_ID curveType){
    CMF cmf;
    const float* copyMe = NULL;
    switch(curveType){
        case X_CMF_2DEG:
            copyMe = X_BAR_2_DEG;
            cmf.nmMin = X_BAR_2_DEG_MIN;
            cmf.nmMax = X_BAR_2_DEG_MAX;
            cmf.nmStep = X_BAR_2_DEG_STEP;
            cmf.N  = X_BAR_2_N;
            break;
        case Y_CMF_2DEG:
            copyMe = Y_BAR_2_DEG;
            cmf.nmMin = Y_BAR_2_DEG_MIN;
            cmf.nmMax = Y_BAR_2_DEG_MAX;
            cmf.nmStep = Y_BAR_2_DEG_STEP;
            cmf.N  = Y_BAR_2_N;
            break;
        case Z_CMF_2DEG:
            copyMe = Z_BAR_2_DEG;
            cmf.nmMin = Z_BAR_2_DEG_MIN;
            cmf.nmMax = Z_BAR_2_DEG_MAX;
            cmf.nmStep = Z_BAR_2_DEG_STEP;
            cmf.N  = Z_BAR_2_N;
            break;
        case X_CMF_10DEG:
            copyMe = X_BAR_10_DEG;
            cmf.nmMin = X_BAR_10_DEG_MIN;
            cmf.nmMax = X_BAR_10_DEG_MAX;
            cmf.nmStep = X_BAR_10_DEG_STEP;
            cmf.N  = X_BAR_10_N;
            break;
        case Y_CMF_10DEG:
            copyMe = Y_BAR_10_DEG;
            cmf.nmMin = Y_BAR_10_DEG_MIN;
            cmf.nmMax = Y_BAR_10_DEG_MAX;
            cmf.nmStep = Y_BAR_10_DEG_STEP;
            cmf.N  = Y_BAR_10_N;
            break;
        case Z_CMF_10DEG:
            copyMe = Z_BAR_10_DEG;
            cmf.nmMin = Z_BAR_10_DEG_MIN;
            cmf.nmMax = Z_BAR_10_DEG_MAX;
            cmf.nmStep = Z_BAR_10_DEG_STEP;
            cmf.N  = Z_BAR_10_N;
            break;
        case PHOTOPIC:
            copyMe = PHOTOPIC_DATA;
            cmf.nmMin = PHOTOPIC_MIN;
            cmf.nmMax = PHOTOPIC_MAX;
            cmf.nmStep = PHOTOPIC_STEP;
            cmf.N  = PHOTOPIC_N;
            break;
        case SCOPTIC:
            copyMe = SCOTOPIC_DATA;
            cmf.nmMin = SCOTOPIC_MIN;
            cmf.nmMax = SCOTOPIC_MAX;
            cmf.nmStep = SCOTOPIC_STEP;
            cmf.N  = SCOTOPIC_N;
            break;
        default:
            Assert(false);
            break;
    }

    //Copy data into the CMF
    Assert(copyMe != NULL);
    cmf.data = new float[cmf.N];
    Assert(cmf.data != NULL); //Make sure alloc OK
    memcpy((void*)cmf.data, copyMe, cmf.N * sizeof(float));

    return cmf;
}


#endif //COLOR_DATA_H
